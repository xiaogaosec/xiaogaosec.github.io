<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>hexo用法</title>
    <url>/2024/05/23/hexo/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<p>hexo clean:清理已经生成的静态文件</p>
<p>hexo g:生成所需的静态文件</p>
<p>hexo s启动本地服务，默认访问网站：<a href="http://localhost:4000/">http://localhost:4000</a></p>
<p>hexo d:部署网站</p>
]]></content>
  </entry>
  <entry>
    <title>委派安全</title>
    <url>/2024/05/23/%E5%A7%94%E6%B4%BE%E5%AE%89%E5%85%A8/</url>
    <content><![CDATA[<p>涉及项目:<br><a href="https://github.com/shanfenglan/test/tree/master/spooler">https://github.com/shanfenglan/test/tree/master/spooler</a><br><a href="https://github.com/fortra/impacket%EF%BC%88%E7%BB%BC%E5%90%88%E5%88%A9%E7%94%A8%EF%BC%89">https://github.com/fortra/impacket（综合利用）</a><br><a href="https://github.com/gentilkiwi/kekeo%EF%BC%88%E7%A5%A8%E6%8D%AE%E5%88%A9%E7%94%A8%EF%BC%89">https://github.com/gentilkiwi/kekeo（票据利用）</a><br><a href="https://github.com/topotam/PetitPotam%EF%BC%88%E7%BB%93%E5%90%88ntlm%E9%87%8D%E6%94%BE%EF%BC%89">https://github.com/topotam/PetitPotam（结合ntlm重放）</a><br><a href="https://github.com/leechristensen/SpoolSample%EF%BC%88%E6%89%93%E5%8D%B0%E6%9C%BA%E5%88%A9%E7%94%A8%EF%BC%89">https://github.com/leechristensen/SpoolSample（打印机利用）</a><br><a href="https://www.joeware.net/freetools/tools/adfind/(%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86)">https://www.joeware.net/freetools/tools/adfind/(信息收集)</a><br>参考文章：<br><a href="https://forum.butian.net/share/1591">https://forum.butian.net/share/1591</a><br><a href="https://www.cnblogs.com/sup3rman/p/16088447.html">https://www.cnblogs.com/sup3rman/p/16088447.html</a><br><a href="https://mp.weixin.qq.com/s/0UOOMF5s00D-y3fojVKMdA">https://mp.weixin.qq.com/s/0UOOMF5s00D-y3fojVKMdA</a></p>
<p>1、非约束委派(Unconstrained Delegation, UD)<br>2、约束委派(Constrained Delegation, CD)<br>3、基于资源的约束委派(Resource Based Constrained Delegation, RBCD)<br>简而言之，非约束委派是指用户账户将自身的TGT转发给服务账户使用。约束委派通过S4U2Self和S4U2Proxy两个扩展协议限制服务账户只能访问指定服务资源。<br>RBCD主要就是委派的管理移交给服务资源进行控制，其余和约束性委派基本相同。</p>
<p>账户分类：<br>机器账户：计算机本身名称的账户，在域中computers组内的计算机。<br>主机账户：计算机系统的主机账户，用于正常用户登入计算机使用。<br>服务账户：计算机服务安装时创建的账户，用于运行服务时使用，不可用于登入计算机。<br>#非约束委派<br>原理：<br>机器A（域控）访问具有非约束委派权限的机器B的服务，会把当前认证用户（域管用户）的的TGT放在ST票据中，一起发送给机器B，机器B会把TGT存储在lsass进程中以备下次重用。从而机器B就能使用这个TGT模拟认证用户（域管用户）访问服务。</p>
<p>利用场景：<br>攻击者拿到了一台配置非约束委派的机器权限，可以诱导域管来访问该机器，然后得到管理员的TGT，从而模拟域管用户。</p>
<p>复现配置：<br>1、信任此计算机来委派任何服务<br>2、setspn -U -A priv&#x2F;test webadmin<br>第一步判断查询：<br>查询域内设置了非约束委派的服务账户：AdFind -b “DC&#x3D;god,DC&#x3D;org” -f “(&amp;(samAccountType&#x3D;805306368)(userAccountControl:1.2.840.113556.1.4.803:&#x3D;524288))” dn<br>查询域内设置了非约束委派的机器账户: AdFind -b “DC&#x3D;god,DC&#x3D;org” -f “(&amp;(samAccountType&#x3D;805306369)(userAccountControl:1.2.840.113556.1.4.803:&#x3D;524288))” dn<br>利用思路1：诱使域管理员访问机器<br>利用条件：<br>1、需要Administrator权限<br>2、域内主机的机器账户开启非约束委派<br>3、域控管理员远程访问（主动或被动）</p>
]]></content>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2024/05/22/kali%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81ip/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
<p>返回主页<br>首页<br>管理<br>Kali配置网卡静态信息<br>阅读目录</p>
<p> 报错信息<br>临时配置ip</p>
<p>ifconfig eth0 up              &#x2F;&#x2F;端口启用<br>ifconfig eth0 down            &#x2F;&#x2F;端口关闭<br>ifconfig eth0 192.168.1.10    &#x2F;&#x2F;只修改ip地址<br>ifconfig eth0 192.168.1.10&#x2F;24 或者 ifconfig eth0 1.1.1.1 netmask 255.0.0.0<br>临时修改路由</p>
<p>route          &#x2F;&#x2F;查看路由表<br>netstat -rn    &#x2F;&#x2F;查看路由表<br>route del default eth0        &#x2F;&#x2F;删除eth0上的默认路由<br>route add default gw 192.168.1.1    &#x2F;&#x2F;添加默认路由<br>修改配置文件修改网卡信息</p>
<p>复制代码<br>&#x2F;etc&#x2F;network&#x2F;interfaces</p>
<p>auto lo<br>iface lo inet loopback<br>allow-hotplug eth0<br>iface eth0 inet dhcp</p>
<p>iface eth0 inet6 auto</p>
<p>修改为：</p>
<p>auto lo<br>iface lo inet loopback<br>allow-hotplug eth0<br>auto eth0                 # 增加了该选项，因为使用networking restart时系统启动                            auto的网卡，如不加上则启动无反应<br>iface eth0 inet static    # 配置了static 为静态ip   |   自动获取 iface eth0 inet dhcp<br>address 192.168.1.4       # 设置ip地址<br>netmask 255.255.255.0     # 设置掩码<br>gateway 192.168.1.1       # 设置网关<br>dns-nameservers 223.5.5.5 # 错误的<br> iface eth0 inet6 auto # 可写可不写<br>复制代码<br> 终端命令行下重启网络：service networking restart或 &#x2F;etc&#x2F;init.d&#x2F;networking restart 。</p>
<p>回到顶部<br> 报错信息<br>复制代码<br>root@bogon:<del># &#x2F;etc&#x2F;init.d&#x2F;networking restart<br>[….] Restarting networking (via systemctl): networking.serviceJob for networking.service failed because the control process exited with error code.<br>See “systemctl status networking.service” and “journalctl -xe” for details.<br> failed!<br>root@bogon:</del># vim &#x2F;etc&#x2F;network&#x2F;interfaces<br>root@bogon:~# systemctl status networking.service<br>● networking.service - Raise network interfaces<br>   Loaded: loaded (&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;networking.service; enabled; vendor prese<br>   Active: failed (Result: exit-code) since Sun 2019-04-28 12:06:52 CST; 58s ago<br>     Docs: man:interfaces(5)<br>  Process: 6811 ExecStartPre&#x3D;&#x2F;bin&#x2F;sh -c if [ “$CONFIGURE_INTERFACES” !&#x3D; “no” ] &amp;<br>  Process: 6814 ExecStart&#x3D;&#x2F;sbin&#x2F;ifup -a –read-environment (code&#x3D;exited, status&#x3D;<br> Main PID: 6814 (code&#x3D;exited, status&#x3D;1&#x2F;FAILURE)</p>
<p>4月 28 12:06:52 bogon systemd[1]: Starting Raise network interfaces…<br>4月 28 12:06:52 bogon ifup[6814]: Not enough information: “dev” argument is requ<br>4月 28 12:06:52 bogon ifup[6814]: ifup: failed to bring up eth0<br>4月 28 12:06:52 bogon systemd[1]: networking.service: Main process exited, code&#x3D;<br>4月 28 12:06:52 bogon systemd[1]: networking.service: Failed with result ‘exit-c<br>4月 28 12:06:52 bogon systemd[1]: Failed to start Raise network interfaces.<br>lines 1-14&#x2F;14 (END)<br>复制代码</p>
<p>注意代码后面不能有注释，否则报错，需要把注释删除掉</p>
<p>复制代码</p>
<h1 id="This-file-describes-the-network-interfaces-available-on-your-system"><a href="#This-file-describes-the-network-interfaces-available-on-your-system" class="headerlink" title="This file describes the network interfaces available on your system"></a>This file describes the network interfaces available on your system</h1><h1 id="and-how-to-activate-them-For-more-information-see-interfaces-5"><a href="#and-how-to-activate-them-For-more-information-see-interfaces-5" class="headerlink" title="and how to activate them. For more information, see interfaces(5)."></a>and how to activate them. For more information, see interfaces(5).</h1><p>source &#x2F;etc&#x2F;network&#x2F;interfaces.d&#x2F;*</p>
<h1 id="The-loopback-network-interface"><a href="#The-loopback-network-interface" class="headerlink" title="The loopback network interface"></a>The loopback network interface</h1><p>auto lo<br>iface lo inet loopback<br>auto eth0<br>iface eth0 inet static<br>address 192.168.2.135<br>netmask 255.255.255.0<br>gateway 192.168.2.1</p>
<p>复制代码<br>修改dns配置文件</p>
<p>缺点： 重启后会消失</p>
<p>复制代码<br>&#x2F;etc&#x2F;resolv.conf<br>nameserver 202.106.0.20<br>nameserver 202.106.46.151</p>
<p>修改为：<br>nameserver 202.106.0.20<br>nameserver 202.106.46.151<br>nameserver 8.8.8.8</p>
]]></content>
  </entry>
</search>
